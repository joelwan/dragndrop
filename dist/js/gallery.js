!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(8)},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=f[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(u(i.parts[o],t))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(u(i.parts[o],t));f[i.id]={id:i.id,refs:1,parts:s}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],s=r[1],a=r[2],l=r[3],u={css:s,media:a,sourceMap:l};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function o(e,t){var n=y(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function u(e,t){var n,i,r;if(t.singleton){var o=g++;n=m||(m=a(t)),i=c.bind(null,n,o,!1),r=c.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=h.bind(null,n),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),i=d.bind(null,n),r=function(){s(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function c(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function d(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),y=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,b=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],l=f[a.id];l.refs--,o.push(l)}if(e){var u=r(e);i(u,t)}for(var s=0;s<o.length;s++){var l=o[s];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete f[l.id]}}}};var w=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,null,[{key:"move",value:function(e,t,n){e.style.left=t+"px",e.style.top=n+"px"}}]),e}();t.Utils=r},function(e,t){"use strict";function n(e){return new Promise(function(t,n){var i=new XMLHttpRequest;i.open("GET",e),i.onload=function(){200===i.status?t(i.response):n(new Error(i.statusText))},i.onerror=function(){n(new Error("Network error"))},i.send()})}Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=n},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),s=function(){function e(){i(this,e)}return r(e,null,[{key:"mousedown",value:function(t,n){var i=document.getElementById(this.id);i.className+=" moving";var r=n.clientX-i.offsetLeft,o=n.clientY-i.offsetTop;return this.events.mousemove=e.mousemove.bind(this,r,o,t),document.addEventListener("mousemove",this.events.mousemove,!1),document.addEventListener("mouseup",this.events.mouseup,!1),n.preventDefault(),!1}},{key:"mousemove",value:function(t,n,i,r){for(var s=document.getElementById(this.id),a=r.clientX-t,l=r.clientY-n,u=a+s.offsetWidth/2,c=l+s.offsetHeight/2,d=this.rowIndex,h=this.colIndex,f=Math.max(0,h-1),p=Math.min(h+1,this.grid.totalCols()-1),v=Math.max(0,d-1),y=Math.min(d+1,this.grid.totalRows()-1),m=[],g=v;g<=y;g++)for(var b=f;b<=p;b++)this.rowIndex==g&&this.colIndex==b||m.push(this.grid.snapGrid[g][b]);this.redrawing||(o.Utils.move(s,a,l),e.checkIntersection(u,c,m,i))}},{key:"mouseup",value:function(e){var t=document.getElementById(this.id);t.className=t.className.replace(" moving",""),o.Utils.move(t,this.x,this.y),document.removeEventListener("mouseup",this.events.mouseup,!1),document.removeEventListener("mousemove",this.events.mousemove,!1)}},{key:"checkIntersection",value:function(e,t,n,i){var r=!0,o=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value,c=e>u.x1,d=e<u.x2,h=t>u.y1,f=t<u.y2;c&&d&&h&&f&&i(u.row,u.col)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}}}]),e}();t.Events=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Gallery=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(4),s=n(7);n(12);var a=function(){function e(t,n,r){var s=this;i(this,e),(0,o.fetch)(n).catch(function(e){throw new AJAXError(e)}).then(JSON.parse).catch(function(e){throw new JSONError(e)}).then(function(e){s.images=e.gallery.images,s.render()}).catch(function(e){throw new ApplicationError(e)}),this.domId=t,this.tiles=[],this.numTilesLoaded=0,this.callback=r,this.isReady=!1,this.pointsX=[],this.pointsY=[],this.tileGrid=[],this.snapGrid=[]}return r(e,[{key:"render",value:function(){var e=document.createElement("div");document.getElementById(this.domId).appendChild(e);var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this.images[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,u=new s.GalleryTile(t,l.imageURL,this,this.onTileLoadComplete.bind(this));this.tiles.push(u),e.appendChild(u.render()),t++}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"onTileLoadComplete",value:function(){this.numTilesLoaded++,this.numTilesLoaded==this.tiles.length&&(this.isReady=!0,this.captureGridData(),this.callback())}},{key:"isReady",value:function(){return this.isReady}},{key:"captureGridData",value:function(){this.tileGrid=[],this.snapGrid=[],this.pointsX=[],this.pointsY=[];var e=0,t=[],n=[],i=!0,r=!1,o=void 0;try{for(var s,a=this.tiles[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var l=s.value;e>0&&l.x==this.tiles[0].x&&(this.tileGrid.push(t),this.snapGrid.push(n),t=[],n=[]),l.rowIndex=this.tileGrid.length,l.colIndex=t.length,t.push(l),n.push({row:l.rowIndex,col:l.colIndex,x1:l.x,x2:l.x+l.height,y1:l.y,y2:l.y+l.height}),e==this.tiles.length-1&&(this.tileGrid.push(t),this.snapGrid.push(n)),this.pointsX.push(l.x),this.pointsY.push(l.y),document.getElementById(l.id).style.position="absolute",document.getElementById(l.id).style.left=l.x+"px",document.getElementById(l.id).style.top=l.y+"px",document.getElementById(l.id).setAttribute("data-row-index",l.rowIndex),document.getElementById(l.id).setAttribute("data-col-index",l.colIndex),e++}}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}}},{key:"totalRows",value:function(){return this.tileGrid.length}},{key:"totalCols",value:function(){return this.tileGrid[0].length}},{key:"getSnapPointsX",value:function(){return this.pointsX}},{key:"getSnapPointsY",value:function(){return this.pointsY}},{key:"reDraw",value:function(e,t){var n=0,i=-1,r=-1,o=!0,s=!1,a=void 0;try{for(var l,u=this.tiles[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.redrawing){i=n,r=e*this.totalCols()+t,r>n?(this.tiles.splice(r+1,0,c),this.tiles.splice(n,1)):(this.tiles.splice(r,0,c),this.tiles.splice(n+1,1)),c.redrawing=!1;break}n++}}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}var n=0,d=!0,h=!1,f=void 0;try{for(var p,v=this.tiles[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var c=p.value;c.x=this.pointsX[n],c.y=this.pointsY[n],n++}}catch(e){h=!0,f=e}finally{try{!d&&v.return&&v.return()}finally{if(h)throw f}}this.captureGridData()}}]),e}();t.Gallery=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GalleryTile=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(5);n(13);var s=function(){function e(t,n,r,o){i(this,e),this.imageURL=n,this.id="tile-"+t,this.x=null,this.y=null,this.width=null,this.height=null,this.grid=r,this.callback=o,this.redrawing=!1,this.colIndex=0,this.rowIndex=0}return r(e,[{key:"capture",value:function(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i}},{key:"listen",value:function(){this.events={mousedown:o.Events.mousedown.bind(this,this.intersectionCallback.bind(this)),mouseup:o.Events.mouseup.bind(this)},this.el.addEventListener("mousedown",this.events.mousedown,!1)}},{key:"render",value:function(){this.el=document.createElement("div"),this.el.setAttribute("id",this.id);var e=new Image;return e.addEventListener("load",function(){this.capture(e.parentNode.offsetLeft,e.parentNode.offsetTop,e.parentNode.clientWidth,e.parentNode.clientHeight),this.listen(),this.callback()}.bind(this)),e.setAttribute("src",this.imageURL),this.el.appendChild(e),this.el.className="tile",this.el}},{key:"intersectionCallback",value:function(e,t){this.redrawing=!0,this.x=this.grid.pointsX[e],this.y=this.grid.pointsY[t],this.grid.reDraw(e,t)}}]),e}();t.GalleryTile=s},function(e,t,n){"use strict";var i=n(6);n(3);n(14);var r=new i.Gallery("gallery","/api/gallery.json",function(){console.log("grid loaded successfully")});window.g=r},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"",""])},function(e,t,n){var i=n(9);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(10);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(11);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)}]);